/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1124:function(e,t,n){"use strict";var r=n(2),o=n(1180),l=n(35),c=n(34),d=n(62),f=n(252);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=l(this),n=c(t),r=f(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:d(e)),r}})},1125:function(e,t,n){n(247)("flat")},1126:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return f}));const r=(e=>e.CapacitorPlatforms=(e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t};return n.addPlatform=(e,t)=>{n.platforms.set(e,t)},n.setPlatform=e=>{n.platforms.has(e)&&(n.currentPlatform=n.platforms.get(e))},n})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{});r.addPlatform,r.setPlatform;var o;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(o||(o={}));class l extends Error{constructor(e,code){super(e),this.message=e,this.code=code}}const c=e=>{var t,n,r,c,d;const f=e.CapacitorCustomPlatform||null,v=e.Capacitor||{},m=v.Plugins=v.Plugins||{},h=e.CapacitorPlatforms,w=(null===(t=null==h?void 0:h.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==f?f.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),y=(null===(n=null==h?void 0:h.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==w()),_=(null===(r=null==h?void 0:h.currentPlatform)||void 0===r?void 0:r.isPluginAvailable)||(e=>{const t=L.get(e);return!!(null==t?void 0:t.platforms.has(w()))||!!P(e)}),P=(null===(c=null==h?void 0:h.currentPlatform)||void 0===c?void 0:c.getPluginHeader)||(e=>{var t;return null===(t=v.PluginHeaders)||void 0===t?void 0:t.find((t=>t.name===e))}),L=new Map,x=(null===(d=null==h?void 0:h.currentPlatform)||void 0===d?void 0:d.registerPlugin)||((e,t={})=>{const n=L.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const r=w(),c=P(e);let d;const h=n=>{let m;const h=(...h)=>{const p=(async()=>(!d&&r in t?d=d="function"==typeof t[r]?await t[r]():t[r]:null!==f&&!d&&"web"in t&&(d=d="function"==typeof t.web?await t.web():t.web),d))().then((t=>{const d=((t,n)=>{var d,f;if(!c){if(t)return null===(f=t[n])||void 0===f?void 0:f.bind(t);throw new l(`"${e}" plugin is not implemented on ${r}`,o.Unimplemented)}{const r=null==c?void 0:c.methods.find((e=>n===e.name));if(r)return"promise"===r.rtype?t=>v.nativePromise(e,n.toString(),t):(t,r)=>v.nativeCallback(e,n.toString(),t,r);if(t)return null===(d=t[n])||void 0===d?void 0:d.bind(t)}})(t,n);if(d){const p=d(...h);return m=null==p?void 0:p.remove,p}throw new l(`"${e}.${n}()" is not implemented on ${r}`,o.Unimplemented)}));return"addListener"===n&&(p.remove=async()=>m()),p};return h.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(h,"name",{value:n,writable:!1,configurable:!1}),h},y=h("addListener"),_=h("removeListener"),x=(e,t)=>{const n=y({eventName:e},t),r=async()=>{const r=await n;_({eventName:e,callbackId:r},t)},p=new Promise((e=>n.then((()=>e({remove:r})))));return p.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},p},$=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return c?x:y;case"removeListener":return _;default:return h(t)}}});return m[e]=$,L.set(e,{name:e,proxy:$,platforms:new Set([...Object.keys(t),...c?[r]:[]])}),$});return v.convertFileSrc||(v.convertFileSrc=e=>e),v.getPlatform=w,v.handleError=t=>e.console.error(t),v.isNativePlatform=y,v.isPluginAvailable=_,v.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),v.registerPlugin=x,v.Exception=l,v.DEBUG=!!v.DEBUG,v.isLoggingEnabled=!!v.isLoggingEnabled,v.platform=v.getPlatform(),v.isNative=v.isNativePlatform(),v},d=(e=>e.Capacitor=c(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{}),f=d.registerPlugin;d.Plugins;class v{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);const r=async()=>this.removeListener(e,t),p=Promise.resolve({remove:r});return Object.defineProperty(p,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()}}),p}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,data){const t=this.listeners[e];t&&t.forEach((e=>e(data)))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new d.Exception(e,o.Unimplemented)}unavailable(e="not available"){return new d.Exception(e,o.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}}).call(this,n(51))},1180:function(e,t,n){"use strict";var r=n(143),o=n(34),l=n(380),c=n(20),d=function(e,t,source,n,f,v,m,h){for(var element,w,y=f,_=0,P=!!m&&c(m,h);_<n;)_ in source&&(element=P?P(source[_],_,t):source[_],v>0&&r(element)?(w=o(element),y=d(e,t,element,w,y,v-1)-1):(l(y+1),e[y]=element),y++),_++;return y};e.exports=d},1244:function(e,t,n){"use strict";n.r(t),n.d(t,"Http",(function(){return o}));var r=n(1126);const o=Object(r.b)("Http",{web:()=>n.e(15).then(n.bind(null,3100)).then((e=>new e.HttpWeb)),electron:()=>n.e(15).then(n.bind(null,3100)).then((e=>new e.HttpWeb))})},2979:function(e,t,n){"use strict";n.r(t);n(528),n(1124),n(1125);var r=n(3),o=(n(25),n(13),n(59),n(32),n(988),n(21),n(369),n(961)),l=n(1012),c={name:"BilibiliVideoDownloader",data:function(){return{results:null,loading:!1,form:{url:"",api2:!0},progress:{show:!1,percentage:0,status:null,text:null,activate:!1},regex:o.a}},methods:{downloadInApp:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o,l,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.src.flat()[0],l=n(1244),c=l.Http,t.progress.show=!0,t.progress.percentage=0,t.progress.status=null,t.progress.text=null,t.progress.activate=!0,r.next=9,new Promise((function(e){return setTimeout(e,500)}));case 9:c.addListener("progress",(function(e){t.progress.percentage=e.contentLength?Math.round(e.bytes/e.contentLength*100):0,t.progress.text="".concat((e.bytes/1024).toFixed(2),"KB / ").concat((e.contentLength/1024).toFixed(2),"KB")})),c.downloadFile({url:o,filePath:"".concat(+new Date,".").concat(e.container),fileDirectory:"DOWNLOADS",headers:{referer:t.results.extra.referer,"User-Agent":t.results.extra.ua},method:"GET",progress:!0,connectTimeout:1e4}).then((function(e){t.progress.show=!0,t.progress.percentage=100,t.progress.status="success",t.progress.activate=!1,t.progress.text="下载完成",t.$notify.success({title:"下载成功",message:"已保存到：".concat(e.path)})})).catch((function(e){t.$notify.error({title:"下载失败",message:e.message}),t.progress.show=!0,t.progress.percentage=100,t.progress.status="exception",t.progress.activate=!1,t.progress.text="下载失败"}));case 11:case"end":return r.stop()}}),r)})))()},download:function(){var e=this;if(this.loading)return!1;/^(av|BV)([0-9]+|\w+)$/.test(this.form.url)&&(this.form.url="https://www.bilibili.com/video/".concat(this.form.url)),/(https?:\/\/b23\.tv\/)(av|BV)([0-9]|\w)+/.test(this.form.url)&&(this.form.url="https://www.bilibili.com/video/".concat(this.form.url.match(/(av|BV)([0-9]|\w)+/)[0])),Object(l.isURL)(this.form.url)?(this.progress.show=!1,this.progress.percentage=0,this.progress.status=null,this.progress.text=null,this.progress.activate=!1,this.loading=!0,this.results=null,/bilibili\.com\/video\/av/.test(this.form.url)?this.$axios.post("/bilibili_video_downloader",{url:this.form.url}).then((function(t){e.loading=!1,e.results=t.data.data})).catch((function(t){e.$notify.error({title:"转换失败",message:t}),e.loading=!1})):this.$axios.post("/dwzreduction",{url:this.form.url}).then((function(t){var n,r,o=t.data.data;if(/av[0-9]+/.test(o))n=o.match(/av([0-9]+)/)[1],r="aid";else{if(!/BV\w+/.test(o))throw new Error("请输入正确的链接或ID");n=o.match(/BV\w+/)[0],r="bvid"}return e.$axios.post("/proxy",{url:"https://api.bilibili.com/x/web-interface/archive/stat?".concat(r,"=").concat(n)})})).then((function(t){if(0===t.data.code)return e.$axios.post("/bilibili_video_downloader",{url:"https://www.bilibili.com/video/av".concat(t.data.data.aid)});throw new Error("转换失败")})).then((function(t){e.loading=!1,e.results=t.data.data})).catch((function(t){e.$notify.error({title:"转换失败",message:t}),e.loading=!1}))):this.$notify.error({title:"解析失败",message:"请输入正确的链接"})}}},d=n(6),f=function(e){e.exports.head={meta:[{hid:"keywords",keywords:"Bilibili 视频解析下载,怎么下载哔哩哔哩视频,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"哔哩哔哩视频下载"}],title:"哔哩哔哩视频下载 - MikuTools"},e.options.toolsMeta={name:"哔哩哔哩视频下载",path:"/bilibili_video_downloader",head:{meta:[{hid:"keywords",keywords:"Bilibili 视频解析下载,怎么下载哔哩哔哩视频,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"哔哩哔哩视频下载"}],title:"哔哩哔哩视频下载 - MikuTools"},vip:!0,platforms:["app-android","web-pc","web-mobile"],hot:"vip",key:["vip","other"],icon:"$tabler$brand-bilibili"}},component=Object(d.a)(c,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"bilibili_video_downloader"},[t("nya-container",{attrs:{main:"",title:"哔哩哔哩视频解析"}},[t("el-form",{staticClass:"nya-input-btn",attrs:{model:e.form},nativeOn:{submit:function(e){e.preventDefault()}}},[t("span",{staticClass:"nya-subtitle"},[e._v("请输入视频链接或者AV号")]),t("el-form-item",{attrs:{prop:"url",rules:[{required:!0,message:"链接不能为空"},{pattern:e.regex.http,message:"链接格式不合法"}]}},[t("el-input",{attrs:{disabled:e.loading,clearable:"",autofocus:"",placeholder:"https://www.bilibili.com/video/av43714415"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.download.apply(null,arguments))}},model:{value:e.form.url,callback:function(t){e.$set(e.form,"url","string"==typeof t?t.trim():t)},expression:"form.url"}},[t("el-button",{attrs:{slot:"append",loading:e.loading},on:{click:e.download},slot:"append"},[e._v("\n                        "+e._s(e.loading?"获取中":"开始获取")+"\n                    ")])],1)],1)],1)],1),e.results?t("nya-container",{attrs:{title:"获取成功"}},[t("div",{staticClass:"mb-15"},[e._v("\n            "+e._s(e.results.title)+"\n        ")]),e.$store.state.env.isWeb?t("div",[t("pre",[t("code",[e._v(e._s(e.results.extra))])])]):e._e(),e.$store.state.env.isApp&&e.progress.show?t("div",{staticClass:"mb-15"},[t("div",{staticClass:"nya-subtitle"},[e._v("\n                下载中，请勿离开此页面\n            ")]),t("el-progress",{attrs:{status:e.progress.status,percentage:e.progress.percentage}})],1):e._e(),t("div",{staticClass:"nya-subtitle"},[e._v("\n            下载地址\n        ")]),e._l(e.results.streams,(function(n,r){return t("div",{key:r,staticClass:"mb-15"},[e.$store.state.env.isWeb?t("b",[e._v(e._s(n.quality)+" - "+e._s(r))]):e._e(),e.$store.state.env.isApp?t("el-button",{attrs:{disabled:e.progress.activate,size:"mini"},on:{click:function(t){return e.downloadInApp(n)}}},[e._v("\n                "+e._s(n.quality)+" - "+e._s(r)+"\n            ")]):e._e(),e.$store.state.env.isWeb?t("app-link",{attrs:{href:n.src.flat()[0],target:"_blank",rel:"noopener noreferrer"}},[e._v("\n                "+e._s(n.src.flat()[0])+"\n            ")]):e._e()],1)}))],2):e._e(),t("nya-container",{attrs:{title:"说明"}},[t("ul",{staticClass:"nya-list"},[t("li",[e._v("番剧可能无法下载，分P视频也只能下载第一P，会在未来更新中解决")]),t("li",[t("b",[e._v("不支持 b23.tv 开头的短链接解析")])]),t("li",[e._v("部分版权视频或会员视频无法解析")]),t("li",[e._v("部分视频由于音视频分离，所以可能会出现没有声音的情况")]),t("li",[e._v("可能会出现 "),t("b",[e._v("403 Forbidden")]),e._v(" 的情况，请在下载器加入 "),t("b",[e._v("referer")]),e._v(" 信息，内容为要下载的视频链接，推荐使用aria2进行下载")])])])],1)}),[],!1,null,null,null);"function"==typeof f&&f(component);t.default=component.exports},961:function(e,t,n){"use strict";t.a={domain:/^(?=^.{3,255}$)[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+$/,http:/https?:\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/,http_with_unicode:/https?:\/\/[-A-Za-z0-9\u2E80-\u9FFF+&@#/%?=~_|!:,.;]+[-A-Za-z0-9\u2E80-\u9FFF+&@#/%=~_|]/}},988:function(e,t,n){"use strict";var r=n(2),o=n(4),l=n(62),c=n(532),d=n(530),f=n(5),v=RangeError,m=String,h=Math.floor,w=o(d),y=o("".slice),_=o(1..toFixed),P=function(e,t,n){return 0===t?n:t%2==1?P(e,t-1,n*e):P(e*e,t/2,n)},L=function(data,e,t){for(var n=-1,r=t;++n<6;)r+=e*data[n],data[n]=r%1e7,r=h(r/1e7)},x=function(data,e){for(var t=6,n=0;--t>=0;)n+=data[t],data[t]=h(n/e),n=n%e*1e7},$=function(data){for(var e=6,s="";--e>=0;)if(""!==s||0===e||0!==data[e]){var t=m(data[e]);s=""===s?t:s+w("0",7-t.length)+t}return s};r({target:"Number",proto:!0,forced:f((function(){return"0.000"!==_(8e-5,3)||"1"!==_(.9,0)||"1.25"!==_(1.255,2)||"1000000000000000128"!==_(0xde0b6b3a7640080,0)}))||!f((function(){_({})}))},{toFixed:function(e){var t,n,r,o,d=c(this),f=l(e),data=[0,0,0,0,0,0],h="",_="0";if(f<0||f>20)throw v("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return m(d);if(d<0&&(h="-",d=-d),d>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(d*P(2,69,1))-69)<0?d*P(2,-t,1):d/P(2,t,1),n*=4503599627370496,(t=52-t)>0){for(L(data,0,n),r=f;r>=7;)L(data,1e7,0),r-=7;for(L(data,P(10,r,1),0),r=t-1;r>=23;)x(data,1<<23),r-=23;x(data,1<<r),L(data,1,1),x(data,2),_=$(data)}else L(data,0,n),L(data,1<<-t,0),_=$(data)+w("0",f);return _=f>0?h+((o=_.length)<=f?"0."+w("0",f-o)+_:y(_,0,o-f)+"."+y(_,o-f)):h+_}})}}]);