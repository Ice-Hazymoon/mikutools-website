(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{1464:function(e,t,n){e.exports={}},2550:function(e,t,n){"use strict";n(1464)},2950:function(e,t,n){"use strict";n.r(t);n(21),n(68),n(13),n(39),n(33),n(529),n(246),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(32),n(382),n(60),n(86),n(59),n(46),n(173),n(58);var r=function(e){return e.reduce((function(s,e){return 2*s+e}),0)},o=function(e){for(var a=[],i=7;i>=0;i--)a.push(!!(e&1<<i));return a},l=function(data){this.data=data,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return data instanceof Uint8Array?data[this.pos++]:255&data.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],i=0;i<e;i++)t.push(this.readByte());return t},this.read=function(e){for(var s="",i=0;i<e;i++)s+=String.fromCharCode(this.readByte());return s},this.readUnsigned=function(){var a=this.readBytes(2);return(a[1]<<8)+a[0]}},c=function(e,t){t||(t={});var n=function(t){for(var n=[],i=0;i<t;i++)n.push(e.readBytes(3));return n},l=function(){var t,data;data="";do{t=e.readByte(),data+=e.read(t)}while(0!==t);return data},c=function(img){img.leftPos=e.readUnsigned(),img.topPos=e.readUnsigned(),img.width=e.readUnsigned(),img.height=e.readUnsigned();var c=o(e.readByte());img.lctFlag=c.shift(),img.interlaced=c.shift(),img.sorted=c.shift(),img.reserved=c.splice(0,2),img.lctSize=r(c.splice(0,3)),img.lctFlag&&(img.lct=n(1<<img.lctSize+1)),img.lzwMinCodeSize=e.readByte();var d=l();img.pixels=function(e,data){for(var code,t,n=0,r=function(e){for(var code=0,i=0;i<e;i++)data.charCodeAt(n>>3)&1<<(7&n)&&(code|=1<<i),n++;return code},output=[],o=1<<e,l=o+1,c=e+1,d=[],h=function(){d=[],c=e+1;for(var i=0;i<o;i++)d[i]=[i];d[o]=[],d[l]=null};;)if(t=code,(code=r(c))!==o){if(code===l)break;if(code<d.length)t!==o&&d.push(d[t].concat(d[code][0]));else{if(code!==d.length)throw new Error("Invalid LZW code.");d.push(d[t].concat(d[t][0]))}output.push.apply(output,d[code]),d.length===1<<c&&c<12&&c++}else h();return output}(img.lzwMinCodeSize,d),img.interlaced&&(img.pixels=function(e,t){for(var n=new Array(e.length),r=e.length/t,o=function(r,o){var l=e.slice(o*t,(o+1)*t);n.splice.apply(n,[r*t,t].concat(l))},l=[0,4,2,1],c=[8,8,4,2],d=0,h=0;h<4;h++)for(var f=l[h];f<r;f+=c[h])o(f,d),d++;return n}(img.pixels,img.width)),t.img&&t.img(img)},d=function n(){var d={};switch(d.sentinel=e.readByte(),String.fromCharCode(d.sentinel)){case"!":d.type="ext",function(n){switch(n.label=e.readByte(),n.label){case 249:n.extType="gce",function(n){e.readByte();var l=o(e.readByte());n.reserved=l.splice(0,3),n.disposalMethod=r(l.splice(0,3)),n.userInput=l.shift(),n.transparencyGiven=l.shift(),n.delayTime=e.readUnsigned(),n.transparencyIndex=e.readByte(),n.terminator=e.readByte(),t.gce&&t.gce(n)}(n);break;case 254:n.extType="com",function(e){e.comment=l(),t.com&&t.com(e)}(n);break;case 1:n.extType="pte",function(n){e.readByte(),n.ptHeader=e.readBytes(12),n.ptData=l(),t.pte&&t.pte(n)}(n);break;case 255:n.extType="app",function(n){e.readByte(),n.identifier=e.read(8),n.authCode=e.read(3),"NETSCAPE"===n.identifier?function(n){e.readByte(),n.unknown=e.readByte(),n.iterations=e.readUnsigned(),n.terminator=e.readByte(),t.app&&t.app.NETSCAPE&&t.app.NETSCAPE(n)}(n):function(e){e.appData=l(),t.app&&t.app[e.identifier]&&t.app[e.identifier](e)}(n)}(n);break;default:n.extType="unknown",function(e){e.data=l(),t.unknown&&t.unknown(e)}(n)}}(d);break;case",":d.type="img",c(d);break;case";":d.type="eof",t.eof&&t.eof(d);break;default:throw new Error("Unknown block: 0x"+d.sentinel.toString(16))}"eof"!==d.type&&setTimeout(n,0)};!function(){var l={};if(l.sig=e.read(3),l.ver=e.read(3),"GIF"!==l.sig)throw new Error("Not a GIF file.");l.width=e.readUnsigned(),l.height=e.readUnsigned();var c=o(e.readByte());l.gctFlag=c.shift(),l.colorRes=r(c.splice(0,3)),l.sorted=c.shift(),l.gctSize=r(c.splice(0,3)),l.bgColor=e.readByte(),l.pixelAspectRatio=e.readByte(),l.gctFlag&&(l.gct=n(1<<l.gctSize+1)),t.hdr&&t.hdr(l)}(),setTimeout(d,0)},d=function(e){var t,n,r={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var i in e)r[i]=e[i];r.vp_w&&r.vp_h&&(r.is_vp=!0);var o=null,d=!1,h=null,f=null,_=null,y=null,v=null,w=null,m=null,x=!0,k=!1,T=[],C=[],I=r.gif;void 0===r.auto_play&&(r.auto_play=!I.getAttribute("rel:auto_play")||"1"==I.getAttribute("rel:auto_play"));var canvas,B,A,F,S=r.on_end?r.on_end:null,E=r.loop_delay?r.loop_delay:0,G=r.loop_mode?r.loop_mode:"auto",P=!r.draw_while_loading||r.draw_while_loading,U=!!P&&(!r.show_progress_bar||r.show_progress_bar),R=r.progressbar_height?r.progressbar_height:25,M=r.progressbar_background_color?r.progressbar_background_color:"rgba(255,255,255,0.4)",z=r.progressbar_foreground_color?r.progressbar_foreground_color:"rgba(255,0,22,.8)",D=function(){h=null,f=null,v=_,_=null,w=null},L=function(){try{c(t,X)}catch(e){O("parse")}},N=function(e,t){canvas.width=e*K(),canvas.height=t*K(),A.style.minWidth=e*K()+"px",F.width=e,F.height=t,F.style.width=e+"px",F.style.height=t+"px",F.getContext("2d").setTransform(1,0,0,1,0,0)},j=function(e,t,n){if(n&&U){var o,l,c,d=R;r.is_vp?k?(l=(r.vp_t+r.vp_h-d)/K(),d/=K(),o=r.vp_l/K()+e/t*(r.vp_w/K()),c=canvas.width/K()):(l=r.vp_t+r.vp_h-d,o=r.vp_l+e/t*r.vp_w,c=canvas.width):(l=(canvas.height-d)/(k?K():1),o=e/t*canvas.width/(k?K():1),c=canvas.width/(k?K():1),d/=k?K():1),B.fillStyle=M,B.fillRect(o,l,c-o,d),B.fillStyle=z,B.fillRect(0,l,o,d)}},O=function(e){o=e,n={width:I.width,height:I.height},T=[],B.fillStyle="black",B.fillRect(0,0,r.c_w?r.c_w:n.width,r.c_h?r.c_h:n.height),B.strokeStyle="red",B.lineWidth=3,B.moveTo(0,0),B.lineTo(r.c_w?r.c_w:n.width,r.c_h?r.c_h:n.height),B.moveTo(0,r.c_h?r.c_h:n.height),B.lineTo(r.c_w?r.c_w:n.width,0),B.stroke()},H=function(){w&&(T.push({data:w.getImageData(0,0,n.width,n.height),delay:f}),C.push({x:0,y:0}))},W=function(){var e,t,n,i=-1,l=0,c=function(e){i+=e,h()},d=(e=!1,t=function(){null!==S&&S(I),l++,!1!==G||l<0?n():(e=!1,x=!1)},n=function n(){if(e=x){c(1);var r=10*T[i].delay;r||(r=100),0==(i+1+T.length)%T.length?(r+=E,setTimeout(t,r)):setTimeout(n,r)}},function(){e||setTimeout(n,0)}),h=function(){var e;(i=parseInt(i,10))>T.length-1&&(i=0),i<0&&(i=0),e=C[i],F.getContext("2d").putImageData(T[i].data,e.x,e.y),B.globalCompositeOperation="copy",B.drawImage(F,0,0)};return{init:function(){o||(r.c_w&&r.c_h||B.scale(K(),K()),r.auto_play?d():(i=0,h()))},step:d,play:function(){x=!0,d()},pause:function(){x=!1},playing:x,move_relative:c,current_frame:function(){return i},length:function(){return T.length},move_to:function(e){i=e,h()}}}(),$=function(e){j(t.pos,t.data.length,e)},J=function(){},V=function(e,t){return function(n){e(n),$(t)}},X={hdr:V((function(e){N((n=e).width,n.height)})),gce:V((function(e){H(),D(),h=e.transparencyGiven?e.transparencyIndex:null,f=e.delayTime,_=e.disposalMethod})),com:V(J),app:{NETSCAPE:V(J)},img:V((function(img){w||(w=F.getContext("2d"));var e=T.length,t=img.lctFlag?img.lct:n.gct;e>0&&(3===v?null!==y?w.putImageData(T[y].data,0,0):w.clearRect(m.leftPos,m.topPos,m.width,m.height):y=e-1,2===v&&w.clearRect(m.leftPos,m.topPos,m.width,m.height));var o=w.getImageData(img.leftPos,img.topPos,img.width,img.height);img.pixels.forEach((function(e,i){e!==h&&(o.data[4*i+0]=t[e][0],o.data[4*i+1]=t[e][1],o.data[4*i+2]=t[e][2],o.data[4*i+3]=255)})),w.putImageData(o,img.leftPos,img.topPos),k||(B.scale(K(),K()),k=!0),P&&(B.drawImage(F,0,0),P=r.auto_play),m=img}),!0),eof:function(){H(),$(!1),r.c_w&&r.c_h||(canvas.width=n.width*K(),canvas.height=n.height*K()),W.init(),d=!1,Y&&Y(I)}},Z=function(){var div=document.createElement("div");canvas=document.createElement("canvas"),B=canvas.getContext("2d"),A=document.createElement("div"),F=document.createElement("canvas"),div.width=canvas.width=I.width,div.height=canvas.height=I.height,A.style.minWidth=I.width+"px",div.className="jsgif",A.className="jsgif_toolbar",div.appendChild(canvas),div.appendChild(A),r.c_w&&r.c_h&&N(r.c_w,r.c_h),Q=!0},K=function(){return r.max_width&&n&&n.width>r.max_width?r.max_width/n.width:1},Q=!1,Y=!1,ee=function(e){return!d&&(Y=e||!1,d=!0,T=[],D(),y=null,v=null,w=null,m=null,!0)};return{play:W.play,pause:W.pause,move_relative:W.move_relative,move_to:W.move_to,get_playing:function(){return x},get_canvas:function(){return canvas},get_canvas_scale:function(){return K()},get_loading:function(){return d},get_auto_play:function(){return r.auto_play},get_length:function(){return W.length()},get_current_frame:function(){return W.current_frame()},load_url:function(e,n){if(ee(n)){var r=new XMLHttpRequest;r.open("GET",e,!0),"overrideMimeType"in r?r.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in r?r.responseType="arraybuffer":r.setRequestHeader("Accept-Charset","x-user-defined"),r.onloadstart=function(){Q||Z()},r.onload=function(){200!=this.status&&O("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var data=this.response;data.toString().indexOf("ArrayBuffer")>0&&(data=new Uint8Array(data)),t=new l(data),setTimeout(L,0)},r.onprogress=function(e){e.lengthComputable&&j(e.loaded,e.total,!0)},r.onerror=function(){O("xhr")},r.send()}},load:function(e){this.load_url(I.getAttribute("rel:animated_src")||I.src,e)},load_raw:function(e,n){ee(n)&&(Q||Z(),t=new l(e),setTimeout(L,0))},set_frame_offset:function(e,t){C[e]?(void 0!==t.x&&(C[e].x=t.x),void 0!==t.y&&(C[e].y=t.y)):C[e]=t}}},h=n(959),f={name:"GifSplitter",data:function(){return{n:"",file:null,loading:!1,results:[]}},methods:{handleChange:function(e){var t=e.target.files;if(!t.length)return!1;var n=t[0];/gif$/.test(n.type)?this.file=n:(this.$notify.error({title:"分解失败",message:"该文件获取不是一张GIF图片"}),this.n=null)},start:function(){var e=this;if(!this.file)return!1;this.loading=!0,this.results=[],this.loadFile().then((function(t){var n=new d({gif:t}),r=[];n.load((function(){for(var i=1;i<=n.get_length();i++)n.move_to(i),r.push(n.get_canvas().toDataURL());e.results=r,e.loading=!1}))}))},loadFile:function(){var e=this;return new Promise((function(t){Object(h.a)(e.file).then((function(n){var r=new Image;r.src=n,r.setAttribute("rel:animated_src",URL.createObjectURL(e.file)),r.setAttribute("rel:auto_play","0"),r.addEventListener("load",(function(){t(r)}))}))}))}}},_=(n(2550),n(6)),y=function(e){e.exports.head={meta:[{hid:"keywords",keywords:"GIF图片分解,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"逐帧分解 GIF 图片"}],title:"GIF 图片分解 - MikuTools"},e.options.toolsMeta={name:"GIF 图片分解",path:"/gif_splitter",head:{meta:[{hid:"keywords",keywords:"GIF图片分解,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"逐帧分解 GIF 图片"}],title:"GIF 图片分解 - MikuTools"},vip:!1,platforms:["app-android","web-pc","web-mobile"],key:"image",icon:"$tabler$gif"}},component=Object(_.a)(f,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"gif_splitter"},[t("nya-container",{attrs:{main:"",title:"GIF 分解"}},[t("div",{staticClass:"nya-subtitle mt-0"},[e._v("\n            请选择要分解的 GIF 图片\n        ")]),t("el-input",{attrs:{type:"file",accept:"image/*",disabled:e.loading,placeholder:e.n?e.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件",clearable:""},on:{clear:function(t){e.results=[]}},nativeOn:{change:function(t){return e.handleChange.apply(null,arguments)}},model:{value:e.n,callback:function(t){e.n=t},expression:"n"}},[t("el-button",{attrs:{slot:"append",loading:e.loading},on:{click:e.start},slot:"append"},[e._v("\n                "+e._s(e.loading?"分解中":"开始分解")+"\n            ")])],1)],1),e.results.length?t("nya-container",{staticClass:"results",attrs:{title:"分解成功"}},e._l(e.results,(function(e,n){return t("div",{key:n,staticClass:"image"},[t("img",{attrs:{src:e,alt:""}})])})),0):e._e()],1)}),[],!1,null,null,null);"function"==typeof y&&y(component);t.default=component.exports},959:function(e,t,n){"use strict";n(13);t.a=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))}}}]);