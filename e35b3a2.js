(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{1128:function(n,t){},1129:function(n,t){},1130:function(n,t){},1507:function(n,t,e){n.exports={}},2851:function(n,t,e){n.exports=e.p+"img/ruyao_demo.93910a5.jpg"},2852:function(n,t,e){n.exports=e.p+"img/ruyao.02ca4bc.png"},2853:function(n,t,e){"use strict";e(1507)},3051:function(n,t,e){"use strict";e.r(t);e(21),e(68),e(13);var o,r=e(370),c=e(959);o=e(1127).fabric;var l={name:"Ruyao",data:function(){return{n:null,logo:null,backgroundImage:null,canvas:null,demo:e(2851)}},mounted:function(){this.canvas=new o.Canvas(this.$refs.canvas)},methods:{handleChange:function(n){var t=this,e=n.target.files;if(!e.length)return!1;var o=e[0];Object(c.a)(o).then((function(n){var image=new Image;image.onload=function(){t.backgroundImage=image,t.$nextTick(t.renderCanvas)},image.src=n}))},renderCanvas:function(){var n=this;this.canvas.clear();var image=this.backgroundImage,t=1600,e=this.$refs.box.offsetWidth,r=1;image.width>t?(this.canvas.setWidth(t),this.canvas.setHeight(t/image.width*image.height),r=t/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var e=image.width/2/n.logo.width;image.width>t&&(e=800/n.logo.width);var r=new o.Image(n.logo,{scaleX:e,scaleY:e,left:0,top:0});n.canvas.add(r),r.centerH(),n.canvas.renderAll()}));var c=new o.Image(image,{scaleX:r,scaleY:r,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(c),this.canvas.width>e&&(this.canvas.wrapperEl.style.transform="scale(".concat(e/this.canvas.width,")"),this.canvas.wrapperEl.style.width="100%",this.canvas.wrapperEl.style.height=this.canvas.height*(e/this.canvas.width)+"px")},getLogo:function(){var n=this;return new Promise((function(t,o){var image=new Image;image.crossOrigin="Anonymous",image.onload=function(){n.logo=image,t(image)},image.onerror=o,image.src=e(2852)}))},save:function(){if(!this.n)return!1;r.a.bind(this)({url:this.canvas.toDataURL(),filename:"naizi_".concat((new Date).getTime(),".png")})}}},h=(e(2853),e(6)),d=function(n){n.exports.head={meta:[{hid:"keywords",keywords:"乳摇图片制作,乳摇视觉差,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"乳摇视觉差图片制作"}],title:"乳摇图片制作 - MikuTools"},n.options.toolsMeta={name:"乳摇图片制作",path:"/ruyao",head:{meta:[{hid:"keywords",keywords:"乳摇图片制作,乳摇视觉差,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"乳摇视觉差图片制作"}],title:"乳摇图片制作 - MikuTools"},vip:!1,platforms:["web-pc","web-mobile"],key:"obsolete",icon:"$svg$custom-bar"}},component=Object(h.a)(l,(function(){var n=this,t=n._self._c;return t("div",{staticClass:"ruyao"},[t("nya-container",{attrs:{main:"",title:"乳摇图片制作"}},[t("div",{staticClass:"nya-subtitle"},[n._v("\n            请选择要制作的图片\n        ")]),t("el-input",{attrs:{type:"file",accept:"image/*",placeholder:n.n?n.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件"},nativeOn:{change:function(t){return n.handleChange.apply(null,arguments)}},model:{value:n.n,callback:function(t){n.n=t},expression:"n"}},[t("el-button",{attrs:{slot:"append"},on:{click:n.save},slot:"append"},[n._v("\n                保存\n            ")])],1)],1),t("nya-container",{directives:[{name:"show",rawName:"v-show",value:n.n,expression:"n"}],attrs:{title:"预览"}},[t("div",{ref:"box",staticClass:"box"},[t("canvas",{ref:"canvas"})])]),t("nya-container",{attrs:{title:"说明"}},[t("ul",{staticClass:"nya-list"},[t("li",[t("app-link",{attrs:{href:n.demo,target:"_blank",rel:"noopener noreferrer"}},[n._v("\n                    点击这里\n                ")]),n._v(" 打开图片后晃动手机，即可看到中间一块区域会晃动\n            ")],1)])])],1)}),[],!1,null,null,null);"function"==typeof d&&d(component);t.default=component.exports},959:function(n,t,e){"use strict";e(13);t.a=function(n){return new Promise((function(t,e){var o=new FileReader;o.readAsDataURL(n),o.onload=function(){return t(o.result)},o.onerror=function(n){return e(n)}}))}}}]);