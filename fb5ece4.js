(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1339:function(e,t,n){e.exports={}},2245:function(e,t,n){"use strict";n(1339)},2973:function(e,t,n){"use strict";n.r(t);n(21),n(68);var r=n(370),o=n(959),l={name:"AvatarGray",data:function(){return{n:null,preview:{origin:null,gray:null}}},methods:{handleChange:function(e){var t=this,n=e.target.files;if(!n.length)return!1;var r=n[0];this.preview.origin=null,this.preview.gray=null,Object(o.a)(r).then((function(e){t.preview.origin=e,t.renderCanvas()}))},save:function(){if(!this.n)return!1;r.a.bind(this)({url:this.preview.gray,filename:"avatar_gray_".concat((new Date).getTime(),".png")})},renderCanvas:function(){var e=this,canvas=document.createElement("canvas"),img=document.createElement("img");img.src=this.preview.origin;var t=canvas.getContext("2d");img.onload=function(){canvas.width=img.width,canvas.height=img.height,t.drawImage(img,0,0);for(var n=t.getImageData(0,0,canvas.width,canvas.height),i=0;i<n.data.length;i+=4){var r=n.data[i],o=n.data[i+1],l=n.data[i+2],c=parseInt((r+o+l)/3);n.data[i]=c,n.data[i+1]=c,n.data[i+2]=c}t.putImageData(n,0,0),e.preview.gray=canvas.toDataURL()}}}},c=(n(2245),n(6)),d=function(e){e.exports.head={meta:[{hid:"keywords",keywords:"黑白头像制作,黑白图片转换,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"黑白头像制作"}],title:"黑白头像制作 - MikuTools"},e.options.toolsMeta={name:"黑白头像制作",path:"/avatar_gray",head:{meta:[{hid:"keywords",keywords:"黑白头像制作,黑白图片转换,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"黑白头像制作"}],title:"黑白头像制作 - MikuTools"},vip:!1,platforms:["app-android","web-pc","web-mobile"],key:"image",icon:"$tabler$ankh"}},component=Object(c.a)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"avatar_gray"},[t("nya-container",{attrs:{main:"",title:"黑白头像制作"}},[t("div",{staticClass:"nya-subtitle"},[e._v("\n            请选择要制作的图片\n        ")]),t("el-input",{attrs:{type:"file",accept:"image/*",placeholder:e.n?e.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件",clearable:""},nativeOn:{change:function(t){return e.handleChange.apply(null,arguments)}},model:{value:e.n,callback:function(t){e.n=t},expression:"n"}},[t("el-button",{attrs:{slot:"append"},on:{click:e.save},slot:"append"},[e._v("\n                保存图片\n            ")])],1)],1),t("nya-container",{directives:[{name:"show",rawName:"v-show",value:e.n,expression:"n"}],attrs:{title:"预览"}},[t("div",{staticClass:"preview-box"},[t("img",{staticClass:"preview-origin",attrs:{src:e.preview.origin,alt:"preview"}}),t("img",{staticClass:"preview-gray",attrs:{src:e.preview.gray,alt:"preview"}})])])],1)}),[],!1,null,null,null);"function"==typeof d&&d(component);t.default=component.exports},959:function(e,t,n){"use strict";n(13);t.a=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))}}}]);