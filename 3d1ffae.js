(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1128:function(n,t){},1129:function(n,t){},1130:function(n,t){},1368:function(n,t,e){n.exports={}},2349:function(n,t,e){n.exports=e.p+"img/0.f9be7ee.png"},2350:function(n,t,e){n.exports=e.p+"img/1.5f15e25.png"},2351:function(n,t,e){n.exports=e.p+"img/2.6cf22f3.png"},2352:function(n,t,e){n.exports=e.p+"img/3.08c6e2d.png"},2353:function(n,t,e){n.exports=e.p+"img/4.3c77ce6.png"},2354:function(n,t,e){n.exports=e.p+"img/5.01c3357.png"},2355:function(n,t,e){n.exports=e.p+"img/6.7b0dd88.png"},2356:function(n,t,e){n.exports=e.p+"img/7.9c32e6d.png"},2357:function(n,t,e){n.exports=e.p+"img/8.cb6a9b7.png"},2358:function(n,t,e){n.exports=e.p+"img/9.254388b.png"},2359:function(n,t,e){n.exports=e.p+"img/10.aab0b9f.png"},2360:function(n,t,e){n.exports=e.p+"img/11.8bdadbc.png"},2361:function(n,t,e){n.exports=e.p+"img/12.2734791.png"},2362:function(n,t,e){n.exports=e.p+"img/13.72f1190.png"},2363:function(n,t,e){n.exports=e.p+"img/14.f22ee45.png"},2364:function(n,t,e){n.exports=e.p+"img/15.63c1231.png"},2365:function(n,t,e){n.exports=e.p+"img/16.7209a1f.png"},2366:function(n,t,e){n.exports=e.p+"img/17.b032517.png"},2367:function(n,t,e){n.exports=e.p+"img/18.ecf730e.png"},2368:function(n,t,e){n.exports=e.p+"img/19.8fc9529.png"},2369:function(n,t,e){n.exports=e.p+"img/20.8efd468.png"},2370:function(n,t,e){n.exports=e.p+"img/21.d5ed116.png"},2371:function(n,t,e){n.exports=e.p+"img/22.f8c4fdd.png"},2372:function(n,t,e){n.exports=e.p+"img/23.d618050.png"},2373:function(n,t,e){n.exports=e.p+"img/24.c829436.png"},2374:function(n,t,e){n.exports=e.p+"img/25.32a45b7.png"},2375:function(n,t,e){n.exports=e.p+"img/26.b01b1b8.png"},2376:function(n,t,e){n.exports=e.p+"img/27.e96ac1f.png"},2377:function(n,t,e){n.exports=e.p+"img/28.5f0aff4.png"},2378:function(n,t,e){n.exports=e.p+"img/29.ed226e0.png"},2379:function(n,t,e){"use strict";e(1368)},2986:function(n,t,e){"use strict";e.r(t);e(21),e(68),e(13);var o,c=e(370),r=e(959);o=e(1127).fabric;var l={name:"ChristmasHat",data:function(){return{n:null,src:[e(2349),e(2350),e(2351),e(2352),e(2353),e(2354),e(2355),e(2356),e(2357),e(2358),e(2359),e(2360),e(2361),e(2362),e(2363),e(2364),e(2365),e(2366),e(2367),e(2368),e(2369),e(2370),e(2371),e(2372),e(2373),e(2374),e(2375),e(2376),e(2377),e(2378)],style:0,logo:null,backgroundImage:null,canvas:null}},watch:{style:function(){this.n&&this.renderCanvas()}},mounted:function(){this.canvas=new o.Canvas(this.$refs.canvas)},methods:{handleChange:function(n){var t=this,e=n.target.files;if(!e.length)return!1;var o=e[0];Object(r.a)(o).then((function(n){var image=new Image;image.onload=function(){t.backgroundImage=image,t.$nextTick(t.renderCanvas)},image.src=n}))},renderCanvas:function(){var n=this;this.canvas.clear();var image=this.backgroundImage,t=1600,e=this.$refs.box.offsetWidth,c=1;image.width>t?(this.canvas.setWidth(t),this.canvas.setHeight(t/image.width*image.height),c=t/image.width):(this.canvas.setWidth(image.width),this.canvas.setHeight(image.height)),this.getLogo().then((function(){var e=image.width/2/n.logo.width;image.width>t&&(e=800/n.logo.width);var c=new o.Image(n.logo,{scaleX:e,scaleY:e,left:0,top:0});n.canvas.add(c),c.centerH(),n.canvas.renderAll()}));var r=new o.Image(image,{scaleX:c,scaleY:c,left:0,top:0,selectable:!1});this.canvas.setBackgroundImage(r),this.canvas.width>e&&(this.canvas.wrapperEl.style.transform="scale(".concat(e/this.canvas.width,")"),this.canvas.wrapperEl.style.width="100%",this.canvas.wrapperEl.style.height=this.canvas.height*(e/this.canvas.width)+"px")},getLogo:function(){var n=this;return new Promise((function(t,e){var image=new Image;image.crossOrigin="anonymous",image.onload=function(){n.logo=image,t(image)},image.onerror=e,image.src=n.src[n.style]}))},save:function(){if(!this.n)return!1;c.a.bind(this)({url:this.canvas.toDataURL(),filename:"christmas_hat_".concat((new Date).getTime(),".png")})}}},f=(e(2379),e(6)),h=function(n){n.exports.head={meta:[{hid:"keywords",keywords:"在线加圣诞帽,头像加圣诞帽,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"给头像加个圣诞帽吧"}],title:"头像加圣诞帽 - MikuTools"},n.options.toolsMeta={name:"头像加圣诞帽",path:"/christmas_hat",head:{meta:[{hid:"keywords",keywords:"在线加圣诞帽,头像加圣诞帽,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"给头像加个圣诞帽吧"}],title:"头像加圣诞帽 - MikuTools"},vip:!1,platforms:["web-pc","web-mobile"],key:"obsolete",icon:"$tabler$christmas-tree"}},component=Object(f.a)(l,(function(){var n=this,t=n._self._c;return t("div",{staticClass:"christmas_hat"},[t("nya-container",{attrs:{main:"",title:"在线加圣诞帽"}},[t("div",{staticClass:"nya-subtitle"},[n._v("\n            请选择要制作的图片\n        ")]),t("el-input",{attrs:{type:"file",accept:"image/*",placeholder:n.n?n.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件",clearable:""},nativeOn:{change:function(t){return n.handleChange.apply(null,arguments)}},model:{value:n.n,callback:function(t){n.n=t},expression:"n"}},[t("el-button",{attrs:{slot:"append"},on:{click:n.save},slot:"append"},[n._v("\n                保存图片\n            ")])],1),t("div",{staticClass:"nya-subtitle mt-15"},[n._v("\n            选择圣诞帽样式\n        ")]),t("el-select",{staticStyle:{width:"100%"},attrs:{"popper-append-to-body":!1,placeholder:"请选择"},model:{value:n.style,callback:function(t){n.style=t},expression:"style"}},n._l(n.src,(function(e,o){return t("el-option",{key:o,attrs:{label:"样式：".concat(o+1),value:o}},[t("div",{staticClass:"preview"},[t("el-image",{attrs:{src:n.$store.state.env.publicCDN+n.src[o],fit:"contain"}}),t("div",[n._v(n._s("样式：".concat(o+1)))])],1)])})),1)],1),t("nya-container",{directives:[{name:"show",rawName:"v-show",value:n.n,expression:"n"}],attrs:{title:"预览"}},[t("div",{ref:"box",staticClass:"box"},[t("canvas",{ref:"canvas"})])])],1)}),[],!1,null,null,null);"function"==typeof h&&h(component);t.default=component.exports},959:function(n,t,e){"use strict";e(13);t.a=function(n){return new Promise((function(t,e){var o=new FileReader;o.readAsDataURL(n),o.onload=function(){return t(o.result)},o.onerror=function(n){return e(n)}}))}}}]);