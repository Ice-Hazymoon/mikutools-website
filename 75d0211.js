/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{1369:function(t,e,n){t.exports={}},2387:function(t,e,n){"use strict";n(1369)},2948:function(t,e,n){"use strict";n.r(e);n(21),n(68),n(13),n(86),n(58);var o=n(2383),r=n.n(o),c=(n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),n(551),n(552),n(553),n(554),n(555),n(556),n(557),n(173),n(60),n(1041),n(46),function(image){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=image.width,this.height=this.canvas.height=image.height,this.context.drawImage(image,0,0,this.width,this.height)});c.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},c.prototype.update=function(t){this.context.putImageData(t,0,0)},c.prototype.getPixelCount=function(){return this.width*this.height},c.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},c.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var l=function(){};if(l.prototype.getColor=function(t,e){return this.getPalette(t,5,e)[0]},l.prototype.getPalette=function(t,e,n){(void 0===e||e<2||e>256)&&(e=10),(void 0===n||n<1)&&(n=10);for(var o,r,g,b,image=new c(t),l=image.getImageData().data,f=image.getPixelCount(),h=[],i=0;i<f;i+=n)r=l[(o=4*i)+0],g=l[o+1],b=l[o+2],l[o+3]>=125&&(r>250&&g>250&&b>250||h.push([r,g,b]));var d=v.quantize(h,e),m=d?d.palette():null;return image.removeCanvas(),m},l.prototype.getColorFromUrl=function(t,e,n){var o=document.createElement("img"),r=this;o.addEventListener("load",(function(){var c=r.getPalette(o,5,n)[0];e(c,t)})),o.src=t},l.prototype.getImageData=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);i=t.length;for(var n=new Array(i),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);var data=n.join(""),o=window.btoa(data);e("data:image/png;base64,"+o)}},n.send()},l.prototype.getColorAsync=function(t,e,n){var o=this;this.getImageData(t,(function(t){var r=document.createElement("img");r.addEventListener("load",(function(){var t=o.getPalette(r,5,n)[0];e(t,this)})),r.src=t}))},!f)var f={map:function(t,e){var n={};return e?t.map((function(t,i){return n.index=i,e.call(n,t)})):t.slice()},naturalOrder:function(a,b){return a<b?-1:a>b?1:0},sum:function(t,e){var n={};return t.reduce(e?function(p,t,i){return n.index=i,p+e.call(n,t)}:function(p,t){return p+t},0)},max:function(t,e){return Math.max.apply(null,e?f.map(t,e):t)}};var h,v=function(){var t=5,e=8-t,n=1e3,o=.75;function r(e,g,b){return(e<<2*t)+(g<<t)+b}function c(t){var e=[],n=!1;function o(){e.sort(t),n=!0}return{push:function(t){e.push(t),n=!1},peek:function(t){return n||o(),void 0===t&&(t=e.length-1),e[t]},pop:function(){return n||o(),e.pop()},size:function(){return e.length},map:function(t){return e.map(t)},debug:function(){return n||o(),e}}}function l(t,e,n,o,r,c,l){var f=this;f.r1=t,f.r2=e,f.g1=n,f.g2=o,f.b1=r,f.b2=c,f.histo=l}function h(){this.vboxes=new c((function(a,b){return f.naturalOrder(a.vbox.count()*a.vbox.volume(),b.vbox.count()*b.vbox.volume())}))}function v(t,e){if(e.count()){var n=e.r2-e.r1+1,o=e.g2-e.g1+1,c=e.b2-e.b1+1,l=f.max([n,o,c]);if(1==e.count())return[e.copy()];var i,h,v,d,m=0,y=[],w=[];if(l==n)for(i=e.r1;i<=e.r2;i++){for(d=0,h=e.g1;h<=e.g2;h++)for(v=e.b1;v<=e.b2;v++)d+=t[r(i,h,v)]||0;m+=d,y[i]=m}else if(l==o)for(i=e.g1;i<=e.g2;i++){for(d=0,h=e.r1;h<=e.r2;h++)for(v=e.b1;v<=e.b2;v++)d+=t[r(h,i,v)]||0;m+=d,y[i]=m}else for(i=e.b1;i<=e.b2;i++){for(d=0,h=e.r1;h<=e.r2;h++)for(v=e.g1;v<=e.g2;v++)d+=t[r(h,v,i)]||0;m+=d,y[i]=m}return y.forEach((function(t,i){w[i]=m-t})),C(l==n?"r":l==o?"g":"b")}function C(t){var n,o,r,c,l,f=t+"1",h=t+"2",v=0;for(i=e[f];i<=e[h];i++)if(y[i]>m/2){for(r=e.copy(),c=e.copy(),l=(n=i-e[f])<=(o=e[h]-i)?Math.min(e[h]-1,~~(i+o/2)):Math.max(e[f],~~(i-1-n/2));!y[l];)l++;for(v=w[l];!v&&y[l-1];)v=w[--l];return r[h]=l,c[f]=r[h]+1,[r,c]}}}return l.prototype={volume:function(t){var e=this;return e._volume&&!t||(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(t){var e=this,n=e.histo;if(!e._count_set||t){var i,o,c,l=0;for(i=e.r1;i<=e.r2;i++)for(o=e.g1;o<=e.g2;o++)for(c=e.b1;c<=e.b2;c++)l+=n[r(i,o,c)]||0;e._count=l,e._count_set=!0}return e._count},copy:function(){var t=this;return new l(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var n=this,o=n.histo;if(!n._avg||e){var c,i,l,f,h=0,v=1<<8-t,d=0,m=0,y=0;for(i=n.r1;i<=n.r2;i++)for(l=n.g1;l<=n.g2;l++)for(f=n.b1;f<=n.b2;f++)h+=c=o[r(i,l,f)]||0,d+=c*(i+.5)*v,m+=c*(l+.5)*v,y+=c*(f+.5)*v;n._avg=h?[~~(d/h),~~(m/h),~~(y/h)]:[~~(v*(n.r1+n.r2+1)/2),~~(v*(n.g1+n.g2+1)/2),~~(v*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(t){var n=this,o=t[0]>>e,r=t[1]>>e,c=t[2]>>e;return o>=n.r1&&o<=n.r2&&r>=n.g1&&r<=n.g2&&c>=n.b1&&c<=n.b2}},h.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,i=0;i<e.size();i++)if(e.peek(i).vbox.contains(t))return e.peek(i).color;return this.nearest(t)},nearest:function(t){for(var e,n,o,r=this.vboxes,i=0;i<r.size();i++)((n=Math.sqrt(Math.pow(t[0]-r.peek(i).color[0],2)+Math.pow(t[1]-r.peek(i).color[1],2)+Math.pow(t[2]-r.peek(i).color[2],2)))<e||void 0===e)&&(e=n,o=r.peek(i).color);return o},forcebw:function(){var t=this.vboxes;t.sort((function(a,b){return f.naturalOrder(f.sum(a.color),f.sum(b.color))}));var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,o=t[n].color;o[0]>251&&o[1]>251&&o[2]>251&&(t[n].color=[255,255,255])}},{quantize:function(d,m){if(!d.length||m<2||m>256)return!1;var y=function(n){var o,c,l,f,h=new Array(1<<3*t);return n.forEach((function(t){c=t[0]>>e,l=t[1]>>e,f=t[2]>>e,o=r(c,l,f),h[o]=(h[o]||0)+1})),h}(d);y.forEach((function(){0}));var w=function(t,n){var o,r,c,f=1e6,h=0,v=1e6,d=0,m=1e6,y=0;return t.forEach((function(t){o=t[0]>>e,r=t[1]>>e,c=t[2]>>e,o<f?f=o:o>h&&(h=o),r<v?v=r:r>d&&(d=r),c<m?m=c:c>y&&(y=c)})),new l(f,h,v,d,m,y,n)}(d,y),C=new c((function(a,b){return f.naturalOrder(a.count(),b.count())}));function k(t,e){for(var o,r=1,c=0;c<n;)if((o=t.pop()).count()){var l=v(y,o),f=l[0],h=l[1];if(!f)return;if(t.push(f),h&&(t.push(h),r++),r>=e)return;if(c++>n)return}else t.push(o),c++}C.push(w),k(C,o*m);for(var x=new c((function(a,b){return f.naturalOrder(a.count()*a.volume(),b.count()*b.volume())}));C.size();)x.push(C.pop());k(x,m-x.size());for(var _=new h;x.size();)_.push(x.pop());return _}}}(),d=l,m=n(959);h=n(2384);var y={name:"Color",data:function(){return{color:"#249ffd",filename:null,preview:"",imgColor:{color:"",palette:""},loading:!1,colorthief:new d,pickr:null,mobile:""}},computed:{handleColor:function(){var t=r()(this.color);return{"RGB(A)":t.toString("rgb").toUpperCase(),HEX6:t.toHexString().toUpperCase(),HEX8:t.toHex8String().toUpperCase(),"HSL(A)":t.toString("hsl").toUpperCase(),"HSV(A)":t.toString("hsv").toUpperCase()}}},mounted:function(){window.innerWidth>950&&(this.hide=!1),this.$store.state.isMobile?n(2385):n(2386),this.initPickr()},methods:{initPickr:function(){var t=this;this.pickr=h.create({el:this.$refs.colorPicker,theme:this.$store.state.isMobile?"monolith":"classic",default:this.color,components:{preview:!0,opacity:!0,hue:!0,interaction:{hex:!0,rgba:!0,hsla:!0,hsva:!0,cmyk:!0,input:!0,clear:!0,save:!0}},position:"right-end"}),this.pickr.on("save",(function(e){t.color=e?e.toRGBA().toString(2):""}))},copyColor:function(t){var e=this;this.$copyText(t).then((function(){e.$message.success("复制成功")}),(function(){e.$message.error("复制失败，请手动选择复制")}))},reset:function(){this.color="#249ffd",this.pickr.setColor("#249ffd"),this.preview="",this.imgColor={color:"",palette:""},this.colorthief=new d},handleChange:function(t){var e=this;if(this.loading)return!1;var n=t.target.files;if(!n.length)return!1;var o=n[0];this.loading=!0,this.reset(),Object(m.a)(o).then((function(t){e.preview=t;var img=new Image;img.onload=function(){var t=e.colorthief.getPalette(img).map((function(t){return r()("rgb(".concat(t.toString(),")")).toHexString()})),n=r()("rgb(".concat(e.colorthief.getColor(img).toString(),")")).toHexString();e.imgColor.palette=t,e.imgColor.color=n,e.color=n,e.pickr.setColor(n),e.loading=!1},img.src=e.preview}))}}},w=(n(2387),n(6)),C=function(t){t.exports.head={meta:[{hid:"keywords",keywords:"hex转rgb,颜色代码转换,在线颜色选择,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"提取图片主色，转换颜色代码"}],title:"颜色处理 - MikuTools"},t.options.toolsMeta={name:"颜色处理",path:"/color",head:{meta:[{hid:"keywords",keywords:"hex转rgb,颜色代码转换,在线颜色选择,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"提取图片主色，转换颜色代码"}],title:"颜色处理 - MikuTools"},vip:!1,platforms:["app-android","web-pc","web-mobile"],key:"other",icon:"$tabler$color-filter"}},component=Object(w.a)(y,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"color"},[e("nya-container",{attrs:{main:"",title:"颜色转换"}},[e("el-tooltip",{attrs:{transition:"el-fade-in",effect:"dark",content:"选择颜色",placement:"top"}},[e("div",{staticStyle:{display:"inline-block"}},[e("div",{staticClass:"nya-subtitle inline-title"},[t._v("\n                    颜色选择器\n                ")]),e("div",{ref:"colorPicker"})])]),e("hr"),e("div",{staticClass:"nya-subtitle"},[t._v("\n            提取图片主色\n        ")]),e("el-input",{staticClass:"mb-15",attrs:{type:"file",placeholder:t.filename?t.filename.replace(/C:\\fakepath\\/,""):"点击这里上传文件",accept:"image/*",clearable:""},on:{clear:t.reset},nativeOn:{change:function(e){return t.handleChange.apply(null,arguments)}},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}),t.preview?e("div",{staticClass:"preview"},[e("div",{staticClass:"nya-subtitle mt-15"},[t._v("\n                预览\n            ")]),e("img",{attrs:{src:t.preview,alt:"preview"}})]):t._e(),t.preview?e("div",{staticClass:"img-colors"},[e("div",{staticClass:"img-color"},[e("div",{staticClass:"nya-subtitle mt-15"},[t._v("\n                    主色\n                ")]),e("el-tooltip",{staticClass:"copy",attrs:{transition:"el-fade-in",effect:"dark",content:"复制主色",placement:"bottom"}},[e("div",{style:{"background-color":t.imgColor.color},on:{click:function(e){return t.copyColor(t.imgColor.color)}}},[t._v("\n                        "+t._s(t.imgColor.color)+"\n                    ")])])],1),e("div",{staticClass:"img-palette"},[e("div",{staticClass:"nya-subtitle"},[t._v("\n                    调色盘\n                ")]),e("ul",t._l(t.imgColor.palette,(function(n,o){return e("el-tooltip",{key:o,attrs:{transition:"el-fade-in",effect:"dark",content:"复制 HEX 值",placement:"bottom"}},[e("li",{style:{"background-color":n},on:{click:function(e){return t.copyColor(n)}}},[t._v("\n                            "+t._s(n)+"\n                        ")])])})),1)])]):t._e()],1),e("nya-container",{attrs:{title:"结果"}},[e("ul",{staticClass:"nya-list"},t._l(t.handleColor,(function(n,o){return e("li",{key:o,on:{click:function(e){return t.copyColor(n)}}},[e("el-tooltip",{attrs:{transition:"el-fade-in",effect:"dark",content:"点击复制：".concat(o),placement:"right"}},[e("div",{staticStyle:{display:"inline-block"}},[e("b",[t._v(t._s(o)+"：")]),e("span",[t._v(t._s(n))])])])],1)})),0)])],1)}),[],!1,null,null,null);"function"==typeof C&&C(component);e.default=component.exports},959:function(t,e,n){"use strict";n(13);e.a=function(t){return new Promise((function(e,n){var o=new FileReader;o.readAsDataURL(t),o.onload=function(){return e(o.result)},o.onerror=function(t){return n(t)}}))}}}]);