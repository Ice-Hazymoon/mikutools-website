(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{1509:function(e,t,l){e.exports={}},2855:function(e,t,l){"use strict";l(1509)},3053:function(e,t,l){"use strict";l.r(t);var r=l(3),o=(l(25),l(23),l(13),l(46),l(39),l(33),l(529),l(246),l(370)),n={name:"ScreenRecord",data:function(){return{aspectRatio:"default",frameRate:"default",resolutions:"default",cursor:"default",mediaRecorder:null,mediaStream:null,recordeBlods:[],previewUrl:"",disabled:!1}},watch:{mediaStream:{handler:function(){(this.$refs.video||{}).srcObject=this.mediaStream},immediate:!0}},mounted:function(){navigator.mediaDevices||(this.disabled=!0)},methods:{recorde:function(){this.mediaStream?this.stop():this.start()},start:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.mediaRecorder=null,e.mediaStream=null,e.recordeBlods=[],t.prev=3,l=e.getDisplayMediaOptions(),t.next=7,navigator.mediaDevices.getDisplayMedia(l);case 7:e.mediaStream=t.sent,e.mediaStream.oninactive=function(){this.stop()}.bind(e),e.mediaRecorder=new MediaRecorder(e.mediaStream),e.mediaRecorder.ondataavailable=e.handleDataAvailable,e.mediaRecorder.start(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),e.$notify.error({title:t.t0.name,message:t.t0.message});case 17:case"end":return t.stop()}}),t,null,[[3,14]])})))()},stop:function(){this.mediaStream&&(this.mediaStream.getTracks().forEach((function(track){track.stop()})),this.mediaStream=null,this.mediaRecorder.stop())},handleDataAvailable:function(e){e.data.size>0&&(this.recordeBlods.push(e.data),this.createPreviewVideo())},createPreviewVideo:function(){var e=new Blob(this.recordeBlods,{type:"video/webm"});this.recordeBlods=[],this.previewUrl=URL.createObjectURL(e),o.a.bind(this)({url:this.previewUrl,filename:"screen-record_".concat((new Date).getTime(),".webm")})},getDisplayMediaOptions:function(){var e={};return"default"!==this.aspectRatio&&(e.aspectRatio=this.aspectRatio),"default"!==this.frameRate&&(e.frameRate=this.frameRate),"default"!==this.cursor&&(e.cursor=this.cursor),"default"!==this.resolutions&&("fit-screen"===this.resolutions&&(e.width=screen.width,e.height=screen.height),"4K"===this.resolutions&&(e.width=3840,e.height=2160),"1080p"===this.resolutions&&(e.width=1920,e.height=1080),"720p"===this.resolutions&&(e.width=1280,e.height=720)),{video:e,audio:!1}}}},d=(l(2855),l(6)),c=function(e){e.exports.head={meta:[{hid:"keywords",keywords:"在线录屏,屏幕录制,录屏工具,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"无需下载的屏幕录制工具"}],title:"电脑录屏工具 - MikuTools"},e.options.toolsMeta={name:"电脑录屏工具",path:"/screen_record",head:{meta:[{hid:"keywords",keywords:"在线录屏,屏幕录制,录屏工具,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"无需下载的屏幕录制工具"}],title:"电脑录屏工具 - MikuTools"},vip:!1,platforms:["web-pc"],key:"other",icon:"$tabler$player-record-filled"}},component=Object(d.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"screen_record"},[e.disabled?t("nya-container",{attrs:{title:"屏幕录制"}},[t("h1",[e._v("你的设备不支持录屏")])]):t("nya-container",{attrs:{title:"屏幕录制"}},[t("div",{staticClass:"nya-subtitle"},[e._v("\n            选择长宽比\n        ")]),t("el-select",{staticClass:"full-width mb-15",attrs:{"popper-append-to-body":!1,placeholder:"选择长宽比"},model:{value:e.aspectRatio,callback:function(t){e.aspectRatio=t},expression:"aspectRatio"}},[t("el-option",{attrs:{label:"默认",value:"default"}}),t("el-option",{attrs:{label:"16:9",value:"1.77"}}),t("el-option",{attrs:{label:"4:3",value:"1.33"}}),t("el-option",{attrs:{label:"21:9",value:"2.35"}}),t("el-option",{attrs:{label:"14:10",value:"1.4"}}),t("el-option",{attrs:{label:"19:10",value:"1.9"}})],1),t("div",{staticClass:"nya-subtitle"},[e._v("\n            选择帧率\n        ")]),t("el-select",{staticClass:"full-width mb-15",attrs:{"popper-append-to-body":!1,placeholder:"选择帧率"},model:{value:e.frameRate,callback:function(t){e.frameRate=t},expression:"frameRate"}},[t("el-option",{attrs:{label:"默认",value:"default"}}),t("el-option",{attrs:{label:"60",value:"60"}}),t("el-option",{attrs:{label:"30",value:"30"}}),t("el-option",{attrs:{label:"25",value:"25"}}),t("el-option",{attrs:{label:"15",value:"15"}}),t("el-option",{attrs:{label:"5",value:"5"}})],1),t("div",{staticClass:"nya-subtitle"},[e._v("\n            选择分辨率\n        ")]),t("el-select",{staticClass:"full-width mb-15",attrs:{"popper-append-to-body":!1,placeholder:"选择分辨率"},model:{value:e.resolutions,callback:function(t){e.resolutions=t},expression:"resolutions"}},[t("el-option",{attrs:{label:"默认",value:"default"}}),t("el-option",{attrs:{label:"屏幕尺寸",value:"fit-screen"}}),t("el-option",{attrs:{label:"4k",value:"4K"}}),t("el-option",{attrs:{label:"1080p",value:"1080p"}}),t("el-option",{attrs:{label:"720p",value:"720p"}})],1),t("div",{staticClass:"nya-subtitle"},[e._v("\n            是否显示光标\n        ")]),t("el-select",{staticClass:"full-width mb-15",attrs:{"popper-append-to-body":!1,placeholder:"是否显示光标"},model:{value:e.cursor,callback:function(t){e.cursor=t},expression:"cursor"}},[t("el-option",{attrs:{label:"默认",value:"default"}}),t("el-option",{attrs:{label:"是",value:"always"}}),t("el-option",{attrs:{label:"否",value:"never"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:e.recorde}},[e._v("\n            "+e._s(e.mediaStream?"停 止":"开 始")+"\n        ")])],1),t("nya-container",{directives:[{name:"show",rawName:"v-show",value:e.mediaStream,expression:"mediaStream"}],attrs:{title:"实时预览"}},[t("video",{ref:"video",staticStyle:{width:"100%"},attrs:{autoplay:""}})]),t("nya-container",{directives:[{name:"show",rawName:"v-show",value:e.previewUrl&&!e.mediaStream,expression:"previewUrl && !mediaStream"}],attrs:{title:"预览"}},[t("video",{ref:"preview",staticStyle:{width:"100%"},attrs:{src:e.previewUrl,loop:"",controls:"",autoplay:""}})]),t("nya-container",{attrs:{title:"说明"}},[t("ul",{staticClass:"nya-list"},[t("li",[e._v("出现无法使用的情况请更换 Chrome 浏览器最新版，仅支持PC端，不支持录制系统/麦克风音频。")]),t("li",[e._v("录制完后可鼠标右键另存为下载")])])])],1)}),[],!1,null,null,null);"function"==typeof c&&c(component);t.default=component.exports}}]);