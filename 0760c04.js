(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{1554:function(t,n,e){t.exports={}},2871:function(t,n,e){"use strict";e(1554)},2964:function(t,n,e){"use strict";e.r(n);e(21),e(68),e(32),e(988),e(177);var o=e(959),r=(e(13),{name:"WhatAnimeIsThis",data:function(){return{n:"",preview:"",file:null,docs:[],loading:!1}},methods:{handleChange:function(t){var n=this,e=t.target.files;if(!e.length)return!1;var r=e[0];this.docs=[],Object(o.a)(r).then((function(t){var image=new Image;image.src=t,image.onload=function(){var canvas=document.createElement("canvas"),t=canvas.getContext("2d");canvas.width=image.width,canvas.height=image.height,t.drawImage(image,0,0),n.preview=canvas.toDataURL(),function(t,n,e){return new Promise((function(o,r){fetch(t).then((function(t){return t.blob()})).then((function(t){var r=new File([t],n,e?{type:e}:{});o(r)})).catch(r)}))}(canvas.toDataURL()).then((function(t){n.file=t}))}}))},getAnime:function(){var t=this;if(!this.preview||!this.file)return!1;this.loading=!0;var n=new FormData;n.append("image",this.file),this.$axios.post("https://api.trace.moe/search?anilistInfo",n,{headers:{"Content-Type":"application/json"},auth:!1}).then((function(n){t.loading=!1,t.docs=n.data.result})).catch((function(n){t.$notify.error({title:"识别失败",message:n}),t.loading=!1}))},secToTime:function(s){var t;if(s>-1){var n=Math.floor(s/3600),e=Math.floor(s/60)%60,o=s%60;t=n<10?"0"+n+":":n+":",e<10&&(t+="0"),t+=e+":",o<10&&(t+="0"),t+=o.toFixed(2)}return t},toPercent:function(t){var n=Number(100*t).toFixed(2);return n+="%"},myCount:function(){var t=this;if(this.loading)return!1;this.loading=!0,this.$axios.get("https://api.trace.moe/me",{},{headers:{"Content-Type":"application/json"},auth:!1}).then((function(n){t.loading=!1;var e=n.data;t.$notify.info({title:"剩余次数",message:"本月总次数剩余：".concat(e.quota," 已使用：").concat(e.quotaUsed)})})).catch((function(n){t.loading=!1,t.$notify.error({title:"获取失败",message:n})}))}}}),c=(e(2871),e(6)),l=function(t){t.exports.head={meta:[{hid:"keywords",keywords:"根据截图搜索动漫,whatanime,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"根据截图搜索动漫"}],title:"这是什么动漫 - MikuTools"},t.options.toolsMeta={name:"这是什么动漫",path:"/what_anime_is_this",head:{meta:[{hid:"keywords",keywords:"根据截图搜索动漫,whatanime,MikuTools,Ice-Hazymoon,在线工具"},{hid:"description",description:"根据截图搜索动漫"}],title:"这是什么动漫 - MikuTools"},vip:!1,platforms:["app-android","web-pc","web-mobile"],key:"other",icon:"$tabler$zoom-question"}},component=Object(c.a)(r,(function(){var t=this,n=t._self._c;return n("div",{staticClass:"what_anime_is_this"},[n("nya-container",{attrs:{main:"",title:"这是什么动漫"}},[n("div",{staticClass:"nya-subtitle mt-0"},[t._v("\n            请选择要识别动漫截图\n        ")]),n("el-input",{attrs:{type:"file",accept:"image/*",disabled:t.loading,placeholder:t.n?t.n.replace(/C:\\fakepath\\/,""):"点击这里上传文件"},nativeOn:{change:function(n){return t.handleChange.apply(null,arguments)}},model:{value:t.n,callback:function(n){t.n=n},expression:"n"}},[n("el-button",{attrs:{slot:"append",loading:t.loading},on:{click:t.getAnime},slot:"append"},[t._v("\n                "+t._s(t.loading?"处理中":"开始处理")+"\n            ")])],1),t.preview?n("div",{staticClass:"nya-subtitle"},[t._v("\n            预览\n        ")]):t._e(),t.preview?n("img",{staticClass:"preview",attrs:{src:t.preview,alt:"preview"}}):t._e()],1),t.docs.length?n("nya-container",{staticClass:"typo",attrs:{title:"搜索结果"}},t._l(t.docs,(function(e,o){return n("table",{key:o},[n("tbody",[n("tr",[n("th",{attrs:{colspan:"2"}},[t._v("\n                        "+t._s("".concat(e.anilist.title.native," ").concat(e.episode?"第"+e.episode+"集":""))+"\n                    ")])]),n("tr",[n("td",{attrs:{width:"100"}},[t._v("\n                        匹配位置\n                    ")]),n("td",[t._v(t._s(t.secToTime(e.from)))])]),n("tr",[n("td",{attrs:{width:"100"}},[t._v("\n                        相似度\n                    ")]),n("td",[t._v(t._s(t.toPercent(e.similarity)))])]),n("tr",[n("td",{attrs:{width:"100"}},[t._v("\n                        日文名称\n                    ")]),n("td",[t._v(t._s(e.anilist.title.native))])]),n("tr",[n("td",{attrs:{width:"100"}},[t._v("\n                        英文名称\n                    ")]),n("td",[t._v(t._s(e.anilist.title.english))])]),n("tr",[n("td",{staticClass:"video-td",attrs:{width:"400",colspan:"2"}},[n("video",{attrs:{controls:"",loop:"",poster:e.image,src:e.video}})])])])])})),0):t._e(),n("nya-container",{attrs:{title:"说明"}},[n("ul",{staticClass:"nya-list"},[n("li",[n("b",[t._v("请善于使用 "),n("nuxt-link",{attrs:{to:"/picture_clipping"}},[t._v("图片裁剪")]),t._v(" 更高效率的识别图片")],1)]),n("li",[t._v("识别成功率取决于上传的截图")]),n("li",[t._v("多个相同/类似结果是因为返回的数据包含多个相同/类似结果")])])])],1)}),[],!1,null,null,null);"function"==typeof l&&l(component);n.default=component.exports},959:function(t,n,e){"use strict";e(13);n.a=function(t){return new Promise((function(n,e){var o=new FileReader;o.readAsDataURL(t),o.onload=function(){return n(o.result)},o.onerror=function(t){return e(t)}}))}},988:function(t,n,e){"use strict";var o=e(2),r=e(4),c=e(62),l=e(532),d=e(530),f=e(5),h=RangeError,v=String,m=Math.floor,w=r(d),_=r("".slice),y=r(1..toFixed),k=function(t,n,e){return 0===n?e:n%2==1?k(t,n-1,e*t):k(t*t,n/2,e)},C=function(data,t,n){for(var e=-1,o=n;++e<6;)o+=t*data[e],data[e]=o%1e7,o=m(o/1e7)},x=function(data,t){for(var n=6,e=0;--n>=0;)e+=data[n],data[n]=m(e/t),e=e%t*1e7},T=function(data){for(var t=6,s="";--t>=0;)if(""!==s||0===t||0!==data[t]){var n=v(data[t]);s=""===s?n:s+w("0",7-n.length)+n}return s};o({target:"Number",proto:!0,forced:f((function(){return"0.000"!==y(8e-5,3)||"1"!==y(.9,0)||"1.25"!==y(1.255,2)||"1000000000000000128"!==y(0xde0b6b3a7640080,0)}))||!f((function(){y({})}))},{toFixed:function(t){var n,e,o,r,d=l(this),f=c(t),data=[0,0,0,0,0,0],m="",y="0";if(f<0||f>20)throw h("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return v(d);if(d<0&&(m="-",d=-d),d>1e-21)if(e=(n=function(t){for(var n=0,e=t;e>=4096;)n+=12,e/=4096;for(;e>=2;)n+=1,e/=2;return n}(d*k(2,69,1))-69)<0?d*k(2,-n,1):d/k(2,n,1),e*=4503599627370496,(n=52-n)>0){for(C(data,0,e),o=f;o>=7;)C(data,1e7,0),o-=7;for(C(data,k(10,o,1),0),o=n-1;o>=23;)x(data,1<<23),o-=23;x(data,1<<o),C(data,1,1),x(data,2),y=T(data)}else C(data,0,e),C(data,1<<-n,0),y=T(data)+w("0",f);return y=f>0?m+((r=y.length)<=f?"0."+w("0",f-r)+y:_(y,0,r-f)+"."+_(y,r-f)):m+y}})}}]);